<h1 class="text-2xl font-bold mb-4">Tasks in: <%= @category %></h1>

<%= link_to 'New Task', new_task_path, class: "btn btn-primary mb-4" %>
<%= link_to '← Back to Categories', tasks_path, class: "btn btn-sm btn-outline mb-4" %>

<table class="table table-zebra w-full">
<thead>
    <tr>
    <th>✓</th>
    <th>Title</th>
    <th>Deadline</th>
    <th>Actions</th>
    </tr>
</thead>
<tbody>
    <% @tasks.each do |task| %>
    <tr class="<%= 'line-through text-gray-400' if task.done %>">
        <td>
        <%= form_with model: task, url: toggle_done_task_path(task), method: :patch, local: true do |f| %>
            <%= f.check_box :done, { checked: task.done, onchange: 'this.form.submit()' }, true, false %>
        <% end %>
        </td>
        <td><%= task.title %></td>
        <td><%= task.deadline&.strftime("%d/%m/%Y") %></td>
        <td>
        <%= link_to 'Show', task, class: "btn btn-sm btn-info" %>
        <%= link_to 'Edit', edit_task_path(task), class: "btn btn-sm btn-warning" %>
        <%= link_to 'Delete', task, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-error" %>
        </td>
    </tr>
    <% end %>
</tbody>
</table>
